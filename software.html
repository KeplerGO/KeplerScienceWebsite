<!DOCTYPE html>
<!--
Crafted with ♥ by Geert Barentsen, Thomas Barclay & Knicole colon at NASA Ames
in August 2015, using pelican-bootstrap and flatly.
-->
<html lang="en"
>

<head>
    <title>Kepler/K2 software tools - Kepler &amp; K2 Science Center</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--Custom meta data-->

    <meta name="dc.title" content="NASA - Kepler/K2 Guest Observer Program" />
    <meta name="dc.format" content="text/html" />
    <meta name="dc.date.modified" content="2019-07-16" />
    <meta name="dc.language" content="en" />
    <meta name="dc.description" content="Resources and Information for Kepler Guest Observers" />
    <meta name="dc.identifier" content="http://keplergo.arc.nasa.gov" />
    <meta name="dc.audience" content="Astronomers, Astrophysicists, Scientists, Researchers" />
    <meta name="dc.subject.discipline" content="Astrophysics, Astronomy" />
    <meta name="orgcode" content="SSA">
    <meta name="rno" content="Thomas.Barclay">
    <meta name="content-owner" content="Thomas.Barclay">
    <meta name="webmaster" content="Thomas.Barclay">


    <link href="./images/favicon.png" rel="icon">

<link rel="canonical" href="./pages/keplerk2-software-tools.html">

        <meta name="author" content="Geert Barentsen" />
        <meta name="description" content="Overview GO Office tools Below is a list of software tools created by the Kepler/K2 Guest Observer Office for use in preparing for Kepler and K2 observations and for analyzing the collected data. lightkurve The Lightkurve Python package offers a user-friendly way to analyze the pixels and light curves …" />

    <meta property="og:site_name" content="Kepler &amp; K2" />
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Kepler/K2 software tools"/>
    <meta property="og:url" content="./pages/keplerk2-software-tools.html"/>
    <meta property="og:description" content="Overview GO Office tools Below is a list of software tools created by the Kepler/K2 Guest Observer Office for use in preparing for Kepler and K2 observations and for analyzing the collected data. lightkurve The Lightkurve Python package offers a user-friendly way to analyze the pixels and light curves …" />


    <!-- Why use Helvetica Neue when you can have Lato? -->
    <link href="./theme/css/lato.css" rel="stylesheet">

    <!-- Bootstrap -->
        <link rel="stylesheet" href="./theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="./theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="./theme/css/exoplanet_archive_icons.css" rel="stylesheet">
    <link href="./theme/css/mission_icons.css" rel="stylesheet">

    <link href="./theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="./theme/css/style.css" type="text/css"/>

    <link href="./feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Kepler &amp; K2 ATOM Feed"/>
    <link href="./feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Kepler &amp; K2 RSS Feed"/>

</head>
<body>

<!-- Print a warning message that this is not the official site -->
<div class="container container-wide" style="background-color: #e74c3c; color: white; padding: 1.5em; font-weight: bold;">
  <div class="container">
   <i class="fa fa-warning fa-lg fa-margin"></i>
    This is the development version of the Kepler/K2 science website.
    For the live website, visit <a href="https://keplerscience.arc.nasa.gov/">keplerscience.arc.nasa.gov</a>
  </div>
</div>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="./" class="navbar-brand">
<img src="./images/NASA_logo_vector_lg.png" width="32"/> Kepler &amp; K2            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li><a href="./archives.html">News</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">The missions <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="./objectives.html">Objectives</a></li>
                                <li><a href="./the-kepler-space-telescope.html">Telescope</a></li>
                                <li><a href="./science.html">Science</a></li>
                                <li><a href="./publications.html">Publications</a></li>
                                <li><a href="./conferences.html">Conferences</a></li>
                                <li><a href="./users-panel.html">Users Panel</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">K2 observing <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="./k2-observing.html">Overview</a></li>
                                <li><a href="./k2-fields.html">Campaign fields</a></li>
                                <li><a href="./k2-approved-programs.html">Targets &amp; programs</a></li>
                                <li><a href="./k2-data-release-notes.html">Data release notes</a></li>
                                <li><a href="./k2-proposing-targets.html">Proposal preparation</a></li>
                                <li><a href="./k2-c9.html">C9 Microlensing experiment</a></li>
                                <li><a href="./supernova-experiment">C16 Supernova experiment</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Data analysis <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="./data-products.html">Data products</a></li>
                                <li><a href="./pipeline.html">Pipeline</a></li>
                                <li><a href="./software.html">Software</a></li>
                                <li><a href="./community-products.html">Community products</a></li>
                            </ul>
                        </li>
            </ul>
            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="./helpdesk.html"><i class="fa fa-info-circle fa-lg"></i> Helpdesk</a>
                </li>
            </ul>
            
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->

<div class="container">
    <div class="row">
        <div class="col-lg-12">

    <div class="col-sm-9" data-spy="scroll" data-target="#sidebarCol">
        <section id="content" class="body">
            <h1 class="entry-title">Kepler/K2 software tools</h1>
            <div class="entry-content">
                
<h2 id="overview">Overview</h2>
<h4>GO Office tools</h4>
<p>Below is a list of software tools created by the Kepler/K2 Guest
Observer Office for use in preparing for Kepler and K2 observations
and for analyzing the collected data.</p>
<table class="table table-striped table-hover" style="max-width:50em;">
<tr>
<td><a href="/software.html#lightkurve">lightkurve</a></td>
<td>
        The Lightkurve Python package offers a user-friendly way to analyze the pixels and light curves obtained by NASA’s Kepler, K2, and TESS missions.
    </td>
<td>
<a href="https://keplerscience.arc.nasa.gov/lightkurve">https://keplerscience.arc.nasa.gov/lightkurve</a>
</td>
</tr>
<tr>
<td><a href="/software.html#pyke">PyKE</a></td>
<td>
        A suite of command-line tools to inspect target pixel files and extract detrended lightcurves.
    </td>
<td>
<a href="https://github.com/nasa/Kepler-PyKE">github.com/nasa/Kepler-PyKE</a>
</td>
</tr>
<tr>
<td><a href="/software.html#k2fov">K2fov</a></td>
<td>
        Checks whether a celestial coordinate falls within the field of view
        of a K2 campaign.
    </td>
<td>
<a href="https://github.com/KeplerGO/K2fov">github.com/KeplerGO/K2fov</a>
</td>
</tr>
<tr>
<td><a href="/software.html#k2ephem">K2ephem</a></td>
<td>
        Checks whether a moving Solar System body, e.g. an asteroid or comet,
        falls within the field of view of any K2 campaign.
    </td>
<td>
<a href="https://github.com/KeplerGO/K2ephem">github.com/KeplerGO/K2ephem</a>
</td>
</tr>
<tr>
<td><a href="http://barentsen.github.io/k2flix/">K2flix</a></td>
<td>
        Converts target pixel files into movies or animated gifs for quick and easy pixel data inspection.
    </td>
<td>
<a href="https://github.com/KeplerGO/k2flix">github.com/KeplerGO/k2flix</a>
</td>
</tr>
<tr>
<td><a href="http://k2mosaic.geert.io">K2mosaic</a></td>
<td>
        Combines target pixel files into wide-field images.
    </td>
<td>
<a href="https://github.com/KeplerGO/k2mosaic">github.com/KeplerGO/k2mosaic</a>
</td>
</tr>
<tr>
<td><a href="https://github.com/KeplerGO/kadenza">Kadenza</a></td>
<td>
        Converts raw cadence data from the Kepler spacecraft into astronomer-friendly FITS files.</td>
<td>
<a href="https://github.com/KeplerGO/kadenza">github.com/KeplerGO/kadenza</a>
</td>
</tr>
</table>
<h4>Community-contributed tools</h4>
<p>Members of the community have made a range of tools available.
A non-exhaustive list of community tools is available on
the <a href="https://docs.lightkurve.org/about/other_software.html">"Other software" page</a> on the documentation website of the <a href="https://docs.lightkurve.org">Lightkurve package</a>.</p>
<h2 id="observation-planning">Observation planning</h2>
<h3 id="k2fov">K2fov</h3>
<p>K2fov is a Python package that allows users to check whether a target falls within the field of view of K2.</p>
<p>In particular, the package adds the <em>K2onSilicon</em> and <em>K2findCampaigns</em> tools to the command line, which allow the visibility of targets to be checked during one or all campaigns, respectively.</p>
<p>The code and documentation is <a href="https://github.com/KeplerGO/K2fov">hosted on Github</a> and only briefly summarized here.</p>
<h4>Installation</h4>
<p>Users will need to have a working version of Python 2 or 3 installed.
If this requirement is met, K2fov can be installed using pip:</p>
<div class="highlight"><pre><span></span>pip install K2fov
</pre></div>
<p>If you have a previous version installed, please make sure you upgrade to the latest version using:</p>
<div class="highlight"><pre><span></span>pip install K2fov --upgrade
</pre></div>
<p>It is important to upgrade frequently to ensure that you are using the most up to date K2 field parameters.</p>
<h4>Usage</h4>
<p>Installing K2fov will automatically add a command line tool to your path called <em>K2onSilicon</em>, which takes a list of targets as input and writes a new list that indicates the "silicon status" of each target, i.e. whether or not it falls on one of the detectors of the spacecraft's focal plane.</p>
<p>The simplest thing to do is to have a CSV file with columns "RA_degrees, Dec_degrees, Kepmag". Do not use a header.
For example, create a file called mytargetlist.csv containing the following rows:</p>
<div class="highlight"><pre><span></span>178.19284, 1.01924, 13.2
171.14213, 5.314616, 11.3
</pre></div>
<p>The format for the target list is very strict -- you need three
columns: ra, dec, and magnitude.
Headers or other additional columns will cause an execution failure.</p>
<p>You can then check whether each object in the file falls on silicon by calling K2onSilicon from the command line:</p>
<div class="highlight"><pre><span></span>K2onSilicon mytargetlist.csv 1
</pre></div>
<p>Where mytargetlist.csv is your CSV file and 1 is the K2 Campaign number.</p>
<p>Running the code will output an updated target list containing the three input columns and an extra column containing either a "0" or "2":</p>
<ul>
<li>0 = Not observable</li>
<li>2 = Target is in the K2 field of view and on silicon</li>
</ul>
<p>The code will also write an image, called targets_fov.png, showing where the targets fall. An example is shown below.
<br/></p>
<p><img class="img-responsive" src="images/K2FOV.png" style="max-width:77%;"/></p>
<p><br/></p>
<p>If instead of checking the targets in a single campaign, you want to understand whether a target is visible in any past or future K2 Campaign, you can use a different tool called <em>K2findCampaigns</em>.</p>
<p>For example, to verify whether J2000 coordinate (ra, dec) = (269.5, -28.5) degrees is visible at any point during the K2 mission, type:</p>
<div class="highlight"><pre><span></span>$ K2findCampaigns <span class="m">269</span>.5 -28.5
Success! The target is on silicon during K2 campaigns <span class="o">[</span><span class="m">9</span><span class="o">]</span>.
</pre></div>
<p>You can also check a list of targets using the alternative command line tool called <em>K2findCampaigns-csv</em>.</p>
<h3 id="k2ephem">K2ephem</h3>
<p>K2ephem is a Python package that allows to check
whether a Solar System body, i.e. a moving asteroid or comet,
falls within the field of view of a K2 campaign.</p>
<p>It provides a command-line tool that will automatically grab the ephemeris
of an object from NASA's JPL/Horizons service and then check its K2 visibility
using <em>K2fov</em>.</p>
<h4>Installation</h4>
<p>You need to have a working version of Python 2 or 3 installed.
If this requirement is met, you can install K2ephem using pip</p>
<div class="highlight"><pre><span></span>pip install K2ephem --upgrade
</pre></div>
<p>If required, this command will take care of installing
the two required dependencies (<em>K2fov</em> and <em>pandas</em>).</p>
<h4>Usage</h4>
<p>After installation, you can call <em>K2ephem</em> from the command line.
For example, to verify whether comet Chiron can be observed by K2, simply type:</p>
<div class="highlight"><pre><span></span>K2ephem Chiron
</pre></div>
<p>Or you can type <em>K2ephem --help</em> to see the detailed usage instructions:</p>
<div class="highlight"><pre><span></span>$ K2ephem --help
usage: K2ephem <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--first campaign<span class="o">]</span> <span class="o">[</span>--last campaign<span class="o">]</span> target

Check <span class="k">if</span> a Solar System object is <span class="o">(</span>or was<span class="o">)</span> observable by NASA<span class="err">'</span>s K2 mission.
This <span class="nb">command</span> will query JPL/Horizons to find out.

positional arguments:
  target            Name of the target. Must be known to JPL/Horizons.

optional arguments:
  -h, --help        show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --first campaign  First campaign to check <span class="o">(</span>default: <span class="m">0</span><span class="o">)</span>
  --last campaign   Final campaign to check <span class="o">(</span>default: <span class="m">18</span><span class="o">)</span>
</pre></div>
<h2 id="data-analysis">Data analysis</h2>
<h3 id="lightkurve">Lightkurve</h3>
<p>Documentation website: <a href="https://docs.lightkurve.org">docs.lightkurve.org</a>.</p>
<p>The lightkurve Python package offers a user-friendly way to analyze astronomical flux time series data, in particular the pixels and lightcurves obtained by NASA’s Kepler, K2, and TESS missions.</p>
<p>This package aims to lower the barrier for both students, astronomers, and citizen scientists interested in analyzing Kepler and TESS space telescope data. It does this by providing high-quality building blocks and tutorials which enable both hand-tailored data analyses and advanced automated pipelines.</p>
<p>Lightkurve is an open source community project.
The development <a href="https://github.com/KeplerGO/lightkurve">takes place on GitHub</a>
and everyone is <a href="http://docs.lightkurve.org/about/contributing.html">invited to contribute</a>.</p>
<h3 id="pyke">PyKE</h3>
<p>PyKE is a suite of command-line tools developed to reduce and
analyze Kepler and K2 light curves, TPFs, and FFIs. PyKE tools provide the
user with flexibility to tune pixel extraction and artifact mitigation
for the scientific potential of individual target data. A variety of
other tasks are also included.
PyKE development takes place on its <a href="https://www.github.com/KeplerGO/PyKE">GitHub repository</a>.
We encourage users to participate in the development process by opening
issues, pull requests, or sending us an email.</p>
<h4>PyKE tasks</h4>
<p>A comprehensive list of PyKE tasks is provided here.</p>
<table class="table table-striped table-hover" style="max-width:70em;">
<tr>
<td>kepbls</td>
<td>Box Least-Square planet transit detection </td>
</tr>
<tr>
<td>kepclip</td>
<td>Remove unwanted time ranges from Kepler time series data </td>
</tr>
<tr>
<td>kepconvert</td>
<td>Convert Kepler FITS time series to or from a different file format </td>
</tr>
<tr>
<td>kepcotrend</td>
<td>Remove systematic trends in photometry using cotrending basis vectors </td>
</tr>
<tr>
<td>kepdetrend</td>
<td>Detrend systematic features from Simple Aperture Photometry (SAP) data </td>
</tr>
<tr>
<td>kepdiffim</td>
<td>Difference imaging of pixels within a target mask </td>
</tr>
<tr>
<td>kepdraw</td>
<td>Interactive plotting of Kepler time series data </td>
</tr>
<tr>
<td>kepdynamic</td>
<td>Construct a dynamic (time-dependent) power spectrum from Kepler time series data </td>
</tr>
<tr>
<td>kepextract</td>
<td>Derive a light curve from a target pixel file, with user-defined apertures </td>
</tr>
<tr>
<td>kepffi</td>
<td>Plot sub-areas of Kepler Full Frame Images and define custom target apertures </td>
</tr>
<tr>
<td>kepfield</td>
<td>Superimpose photometric mask and source positions over a target pixel image </td>
</tr>
<tr>
<td>kepfilter</td>
<td>Remove low frequency variability from time-series, preserve transits and flares </td>
</tr>
<tr>
<td>kepflatten</td>
<td>Low bandpass or high bandpass signal filtering </td>
</tr>
<tr>
<td>kepfold</td>
<td>Fold data on a linear ephemeris </td>
</tr>
<tr>
<td>kepft</td>
<td>Calculate and store a Fourier Transform from a Kepler time series </td>
</tr>
<tr>
<td>kephead</td>
<td>Search for and list FITS keywords in Kepler data files </td>
</tr>
<tr>
<td>kepimages</td>
<td>Create a series of separate FITS image files from a Target Pixel File </td>
</tr>
<tr>
<td>kepmask</td>
<td>Plots, creates or edits custom light curve extraction masks for target pixel files </td>
</tr>
<tr>
<td>kepoutlier</td>
<td>Remove or replace data outliers from a time series</td>
</tr>
<tr>
<td>keppca</td>
<td>Pixel-level principal component analysis of time series </td>
</tr>
<tr>
<td>keppixseries</td>
<td>Individual time series photometry for all pixels within a target mask </td>
</tr>
<tr>
<td>kepprf</td>
<td>Fit a PSF model to a specific image within a Target Pixel File </td>
</tr>
<tr>
<td>kepprfphot</td>
<td>Fit a PSF model to time series observations within a Target Pixel File </td>
</tr>
<tr>
<td>keprange</td>
<td>Interactively define and store time ranges via a GUI </td>
</tr>
<tr>
<td>kepsff</td>
<td>Correct aperture photmetry using target motion </td>
</tr>
<tr>
<td>kepsmooth</td>
<td>Smooth Kepler light curve data by convolution</td>
</tr>
<tr>
<td>kepstddev</td>
<td>Calculate Combined Differental Photometric Precision for time series light curve </td>
</tr>
<tr>
<td>kepstitch</td>
<td>Append multiple month short cadence and/or multiple quarter long cadence data</td>
</tr>
<tr>
<td>keptimefix</td>
<td>Correct time stamps in Target Pixel Files to TDB system </td>
</tr>
<tr>
<td>keptransit</td>
<td>Fit planet trasit models to Kepler time-series </td>
</tr>
<tr>
<td>keptrial</td>
<td>Calculate best period and error estimate from Fourier transform </td>
</tr>
<tr>
<td>keptrim</td>
<td>Trim pixels from Target Pixel Files </td>
</tr>
<tr>
<td>kepwindow</td>
<td>Calculate and store the window function for a Kepler time series </td>
</tr>
</table>
<h4>PyKE history</h4>
<table class="table table-striped table-hover" style="max-width:70em;">
<thead>
<tr>
<th>Date</th>
<th>Version</th>
<th>Description</th>
</tr>
</thead>
<tdata>
<tr>
<td style="min-width: 8em;">2010-06-29</td>
<td>1.0.0 </td>
<td>Initial software release (MS) </td>
</tr>
<tr>
<td>2011-07-03</td>
<td>2.0.0 </td>
<td>Added support for FITS v2.0 archive files (MS) </td>
</tr>
<tr>
<td>2011-07-21</td>
<td>2.1.0 </td>
<td>Added kepcotrend tool to package (TB) </td>
</tr>
<tr>
<td>2011-08-30</td>
<td>2.1.1 </td>
<td>Trapped new behavior of STSCI_PYTHON 2.12 in reading multi-dimension FITS columns (MS) </td>
</tr>
<tr>
<td>2011-09-22</td>
<td>2.1.2 </td>
<td>Plot style updates to kepdraw and kepsmooth (MS) </td>
</tr>
<tr>
<td>2011-10-20</td>
<td>2.1.3 </td>
<td>Added short cadence functionality to basis vector cotrending in kepcotrend. Added simple light curve algebra tool kepartih to package (TB) </td>
</tr>
<tr>
<td>2012-06-09</td>
<td>2.2.0 </td>
<td>Provided greater plotting stability on linux/unix operating systems. Tasks can be executed from within the PyRAF environment or from within a linux/unix shell without compiling against PyRAF or IRAF. Added the kepflatten tool to the task list (MS,TB). </td>
</tr>
<tr>
<td>2012-07-02</td>
<td>2.2.1 </td>
<td>keparith bug addressed. Fatal error upon PDCSAP photometry arithmetic fixed (TB). </td>
</tr>
<tr>
<td>2012-10-01</td>
<td>2.2.2 </td>
<td>kepflatten bug addressed: light curve fits no longer tapered after 4,000 timestamps. NaN handling in kepdraw improved for speed. Two options now provided in kepdraw - fast and ugly - slow and pretty (MS). </td>
</tr>
<tr>
<td>2012-10-09</td>
<td>2.2.3 </td>
<td>kepdraw bug addressed: plottype functionality added to shell-mode operation (MS)
 </td>
</tr>
<tr>
<td>2012-10-12</td>
<td>2.2.4 </td>
<td>kepbls task for transit searching added to package (MS) </td>
</tr>
<tr>
<td>2012-10-23</td>
<td>2.2.5 </td>
<td>kepsmooth bug addressed: fscale and plotlab functionality added to shell-mode operation (MS) </td>
</tr>
<tr>
<td>2012-12-09</td>
<td>2.3.0 </td>
<td>Added tasks keptransit and keppca (TB, MS) </td>
</tr>
<tr>
<td>2013-02-07</td>
<td>2.3.1 </td>
<td>Added kepffi and kepmask functionality to load existing pixel mask defintion. Bug in pixel selection within both tasks and keprange fixed. kepffi adapted in response to format changes to the target tables at MAST (MS) </td>
</tr>
<tr>
<td>2013-08-06</td>
<td>2.4.0 </td>
<td>Added kepfield and keptimefix tasks. Bug corrections in kepfold (MS,TB)</td>
</tr>
<tr>
<td>2013-09-30</td>
<td>2.5.0 </td>
<td>Added kepprf, kepprfphot, kepstddev and keptrim tasks. Bug correction to kepcotrend and functionality change to keptimefix (MS,TB) </td>
</tr>
<tr>
<td>2014-03-26</td>
<td>2.5.1 </td>
<td>Minor adaptations for two-wheel engineering data. Added keptrim (MS)
 </td>
</tr>
<tr>
<td>2014-06-26</td>
<td>2.5.2 </td>
<td>Corrected all tasks for the deprecation of ascardlist() in pyfits 3.1 (MS)</td>
</tr>
<tr>
<td>2014-09-10</td>
<td>2.6.2 </td>
<td>New tools like kepsff (MS) </td>
</tr>
<tr>
<td>2015-12-16</td>
<td>2.6.3a </td>
<td>Bugfixes in kepextract and keppca</td>
</tr>
<tr>
<td>2017-05-03</td>
<td>2.6.3 </td>
<td>PyKE is now installable via the <a href="http://astroconda.readthedocs.io/en/latest/installation.html#legacy-software-stack-with-iraf">Astroconda IRAF Channel</a>
    In addition, the release contains a series of bugfixes related to deprecated dependencies</td>
</tr>
</tdata>
</table>
<h2 id="data-inspection">Data inspection</h2>
<p>A variety of other public software exists for inspection of Kepler and K2 FITS
data.  An incomplete list is provided here. FV can be used to inspect
Target Pixel Files (TPFs) and TOPCAT can be used to inspect light
curves.  DS9, KeplerFFI, and MAST can be used to inspect full-frame images (FFIs).</p>
<h3 id="k2flix">K2flix</h3>
<p>K2flix enables the pixel data to be visualized
by turning Kepler/K2's Target Pixel Files (TPF) into
contrast-stretched animated gifs or MPEG-4 movies.
K2flix can be used both as a command-line tool or using its Python API.
The tool is hosted and documented on <a href="https://github.com/KeplerGO/k2flix">GitHub</a>.</p>
<h3 id="k2mosaic">K2mosaic</h3>
<p>K2mosaic is a command-line tool which allows the postage stamp-sized pixel masks obtained by Kepler and K2 to be stitched together into CCD-sized mosaics and movies. The principal use is to take a set of Target Pixel Files (TPF) and turn them into more traditional FITS image files -- one per CCD channel and per cadence. K2mosaic can also be used to create animations from these mosaics.
The tool is hosted and documented on <a href="https://github.com/KeplerGO/K2mosaic">GitHub</a>.</p>
<h3 id="keplerffi">KeplerFFI</h3>
<p>This FFI inspection tool is used to examine the sources surrounding a
target, assess crowding, identify artifacts, and understand the
effects of the photometric aperture on the light curves. KeplerFFI
also creates a custom pixel mask by allowing users to select pixels
for inclusion within a target aperture. Individual pixels are chosen
interactively by tapping upon them. <a href="/ContributedSoftwareKeplerFFI.shtml">This standalone python tool is
available for download here</a>.</p>
<h3 id="mast-ffi-viewer">MAST FFI Viewer</h3>
<p>MAST maintains an online FFI display tool, which allows the user to
examine individual channels within an FFI image. Kepler and K2 targets, as
well as 2MASS and GALEX sources located within the frame, are marked
with symbols and are user-selectable. Sources for which the data have been
published or made public are also
indicated. <a href="http://archive.stsci.edu/kepler/ffi_display.php">The Kepler FFI tool can be accessed here</a>. <a href="http://archive.stsci.edu/k2/ffi_display.php">The K2 FFI tool can be accessed here</a>.</p>
<h3 id="fv">FV</h3>
<p>Kepler and K2 Target Pixel Files (TPFs) are provided to the user in the form
of binary FITS tables, one file per target. Each row in the table
contains timestamps, photometric measurements, astrometric
measurements and data quality flags. A format description and content
definition of the TPFs is provided in section 2.3.2 of the <a href="http://archive.stsci.edu/kepler/manuals/archive_manual.pdf">Kepler
Archive Manual</a>. Each row of the photometric columns contains a pixel
image of the target. We have found that the best tool to inspect the
structure and content of the TPF is the GUI-driven tool FV. FV is software that can display and edit FITS format tables and images and is developed and distributed by NASA's High Energy Astrophysics Science and Archive Research Center (HEASARC).  We provide a specific example of TPF product inspection using FV below. <a href="http://heasarc.nasa.gov/ftools/fv/">FV can be downloaded here</a>.</p>
<p><strong>Load and inspect tabulated data</strong></p>
<ul>
<li>Start up the FV application to open the primary GUI.</li>
<li>Click on the "Open File..." button in the menu.</li>
<li>Use the file browser that pops up to navigate the folders on your system.</li>
<li>Click on the TPF of interest and then the "Open" button. The file summary GUI
will open. Each row in the summary is a data extension within the FITS
file. All header keywords within the extension will be provided if you
click on one of the "Header" buttons. The "Hist" and "Plot" buttons provide histograms and line plots of tabulated data.</li>
<li>On the summary GUI, click the "All" button to open the table of time-tagged
  data within the TPF.</li>
</ul>
<p><strong>Plot target images</strong></p>
<ul>
<li>In the above table, choose a specific row/time and click the "Image" button under the SAP_FLUX column.</li>
<li>On the summary GUI, click the "Image" button.</li>
<li>FV will ask whether you want replace the current selected image. Click "No".</li>
</ul>
<p><br/></p>
<p><img class="img-responsive" src="images/TPF-FV3.jpg" style="min-width:97%;"/></p>
<p><br/></p>
<p>The above figure shows typical images stored within a TPF. The left-hand image is stored in the time-tagged data table and contains calibrated, background-subtracted and cosmic ray removed pixel fluxes. The right-hand image contains a bitmap that describes the employment of each pixel. Black pixels are not collected, yellow are collected but do not contribute to the photometry stored in the light curve products. White pixels are included in the photometric aperture that maximizes target signal-to-noise over nominal short timescales of observation.</p>
<h3 id="topcat">TOPCAT</h3>
<p>Kepler and K2 times-series light curves are provided to the user in the form
of a binary FITS table, one file per target. Each row in the table
contains timestamps, photometric measurements, astrometric
measurements and data quality flags. A format description and content
definition of the Kepler light curve file is provided in section 2.3.1
of the <a href="http://archive.stsci.edu/kepler/manuals/archive_manual.pdf">Kepler
Archive Manual</a>. Below,
we provide a specific example of light curve product inspection using
the Java tool TOPCAT (Tool for Operation on Catalogs and Tables).
<a href="http://www.star.bris.ac.uk/~mbt/topcat/">TOPCAT can be downloaded here</a>.</p>
<p><strong>Load data and display data table</strong></p>
<ul>
<li>Start up TOPCAT to open the main control GUI. The
left-most icon on the options bar at the top allows the user to open and
inspect light curve files. Other icons provide data table display,
data plotting, filtering and statistics, and output of a variety of
different data formats.</li>
<li>Click on the "Load New Table" icon (top-left) to open a new GUI. In the "Format" dialog box scroll down and click on "FITS".</li>
<li>Click on the "Filestore Browser" button to navigate through your directories; choose the desired file by clicking on it.</li>
<li>The file name will appear in the left-hand window of the main GUI. The
number of rows and columns in the table will appear in the right-hand
area.</li>
<li>Click on the fourth icon from the left in the primary GUI opens the data table within the FITS file for inspection.</li>
</ul>
<p><strong>Plot and save data table</strong></p>
<ul>
<li>Click on the icon labeled "Scatter Plot" at the top of the control window. A plotting GUI opens in which data in the TIME column (col. 1) is plotted versus data in the TIMECORR column (col. 2), the default option.</li>
<li>In the plot window, the user can select alternative data columns to plot. For the Y-axis data choose, for example the data column SAP_FLUX. The plot will update with simple aperture photometry against time.</li>
<li>Options for customizing the plot are available using the various
icons located above the plot. For example, at the bottom right of the plot under "Row Subsets", click on the rightmost button to access the Plot Style Editor.</li>
<li>Save the plot to PDF using icon 4.</li>
<li>Data can be convered to, e.g., ASCII files using the "Save Table" option (the
second icon from the left at the top of the control window).</li>
</ul>
<h3 id="ds9">DS9</h3>
<p>Kepler and K2 Full Frame Images (FFIs) are provided to the user in the form
of a binary FITS file. There are ~94 million pixels in each FFI. In
order to manage this large number of pixel, the data is divided into
subimages by readout node. There are 84 readouts spread over 21 CCD
modules on the detector plane and therefore there are 84 subimages
stored in 84 FITS extensions within the file. Each FFI is 400 MB in
size. A format description and content definition of the Kepler FFIs
is provided in section 2.3.3 of the <a href="http://archive.stsci.edu/kepler/manuals/archive_manual.pdf">Kepler
Archive Manual</a>. We provide
a specific example of FFI inspection using the SAOImage DS9
tool below. DS9 is an image visualization application,
developed by the Smithsonian Astrophysical Observatory.  <a href="">DS9 can be downloaded here</a>.</p>
<p><strong>Load FFI images</strong></p>
<ul>
<li>Start DS9</li>
<li>Under the "File" menu, scroll to the 2nd option, "Open Other", then move the cursor to the right-hand menu and click on "Open Mutli Ext Multi Frames".</li>
<li>A standard directory dialog box will open; select the desired file
  to open. Click on the image.</li>
<li>All FFI subimages, one per channel, will open in a tiled view.</li>
<li>To display a single image from the set, click on it, then under the top-level menu labeled "frame", toggle the "single frame" option.</li>
<li>Toggle between "tile frames" and "single frame" to view any frame on the image.</li>
<li>To load a specific single frame of the image set, click on the "Open" option in the menu under "File". Navigate to the relevant folder, then scroll through the folder for the desired image. Enter the name of the image in the box but add an extra qualifier like: <em>'filename[nn]'</em>, where <em>nn</em> is the HDU or extension number within the FITS file containing the image. The extension number is equivalent to the channel number on the detector mosaic.</li>
<li>Logarithmic image scaling works best for displaying the full dynamic
  range of the Kepler and K2 images.</li>
<li>To adjust the contrast, place the cursor in the image pane, and scroll the mouse, while holding down the right button.</li>
<li>The header keywords for the image can be displayed using the "File"
menu, click on "header". A new window opens asking you to select the
file, click "OK" and another window opens with the header information.</li>
</ul>
<p><strong>FFI matching against the DSS</strong></p>
<ul>
<li>Under the "Analysis" menu, choose "Image Servers" and "STSCI-DSS I/II".</li>
<li>Click the "Retrieve" button.</li>
<li>Under the "Scale" menu, choose "Linear".</li>
<li>Under the "Frame" menu, choose "Match", then "Frame", then "WCS".</li>
<li>Under the "Frame" menu again, click "Blink".</li>
</ul>
<p>The below image displays the result of the example procedure detailed
above. The image shows a side-by-side comparison of a region within the first Q10 FFI (left) with the same region of the Digitized Sky Survey (right).</p>
<p><br/></p>
<p><img class="img-responsive" src="images/ds9-dss.jpg" style="min-width:97%;"/></p>
<p><br/></p>
<p>Note: With so many subimages within an FFI file, it is not immediately
obvious with DS9 how to navigate to a specific celestial location. The
simplest method to inspect the region around a specific provided
celestial coordinate or Kepler or K2 target is to use the tool KeplerFFI
(see below).</p>
            </div>
        </section>
    </div>

        <nav class="col-sm-3 visible-sm visible-md visible-lg bs-docs-sidebar" id="sidebarCol">
            <div class="nav nav-stacked fixed" id="mytoc">
            <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#observation-planning">Observation planning</a><ul>
<li><a href="#k2fov">K2fov</a></li>
<li><a href="#k2ephem">K2ephem</a></li>
</ul>
</li>
<li><a href="#data-analysis">Data analysis</a><ul>
<li><a href="#lightkurve">Lightkurve</a></li>
<li><a href="#pyke">PyKE</a></li>
</ul>
</li>
<li><a href="#data-inspection">Data inspection</a><ul>
<li><a href="#k2flix">K2flix</a></li>
<li><a href="#k2mosaic">K2mosaic</a></li>
<li><a href="#keplerffi">KeplerFFI</a></li>
<li><a href="#mast-ffi-viewer">MAST FFI Viewer</a></li>
<li><a href="#fv">FV</a></li>
<li><a href="#topcat">TOPCAT</a></li>
<li><a href="#ds9">DS9</a></li>
</ul>
</li>
</ul>
</div>
            </div>
        </nav>
        </div>
    </div>
</div>

<div class="container container-wide" style="margin-top: 1.5em;">
  <footer>

     <div class="container">
      
      <!-- Related websites -->  
      <div class="row">
        <div class="col-xs-12">
          <h5><i class="fa fa-external-link"></i><span class="icon-label">Related websites:</span></h5>
          <a href="http://www.nasa.gov/kepler" target="_blank">
                  Kepler/K2 News and Media Resources
              </a>
          <br/>
          <a href="http://www.ballaerospace.com/page.jsp?page=72" target="_blank">
                  Kepler/K2 @ Ball Aerospace
              </a>
          <br/>
          <a href="http://archive.stsci.edu/kepler" target="_blank">
                  Kepler Data Archive @ MAST
              </a>
          <br/>
          <a href="http://archive.stsci.edu/k2" target="_blank">
                  K2 Data Archive @ MAST
              </a>
          <br/>
          <a href="http://exoplanetarchive.ipac.caltech.edu" target="_blank">
                  NASA Exoplanet Archive @ IPAC
              </a>
          <br/>
        </div>
      </div>

      <!-- NASA logo and notices -->
      <div class="row" style="margin-top:2em;">
         <div class="col-md-10"> <a href="http://www.nasa.gov/"><img src="./images/NASA_logo_vector_lg.png" width="30" alt="NASA Logo"></a> 
         Last modified: Sun 14 July 2019
            &middot; Editor: Geert Barentsen &middot; NASA Official: Jessie Dotson
            &middot; <a href="http://www.nasa.gov/about/highlights/HP_Privacy.html">Privacy Policy and Important Notices</a><p></p>         </div>
         <div class="col-md-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
    </div>

  </footer>
</div>
<script src="./theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="./theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="./theme/js/respond.min.js"></script>

    <script src="./theme/js/bodypadding.js"></script>
<!-- Analytics scripts -->


        <script>
          $('#mytoc').affix({
                offset: {
                  top: 50
                }
          });
          $('body').scrollspy({
              target: '#sidebarCol',
              offset: 100
          });

          // Fix for issue #32:
          function refreshScrollspy() {
                $('[data-spy="scroll"]').each(function() {
                    $(this).scrollspy('refresh');
                });
          }
          $("img").bind('load', refreshScrollspy);
        </script>
</body>
</html>